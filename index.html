<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>BTC vs MSTR Strategy Page</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root {
            --accent: #F7931A;
        }
        .accent {
            color: var(--accent);
        }
        .accent-bg {
            background: var(--accent);
        }
        .accent-ring {
            --tw-ring-color: rgba(247, 147, 26, .35);
        }
        .hover-zoom {
            transition: transform .18s ease, box-shadow .18s ease;
        }
        .hover-zoom:hover {
            transform: scale(1.02);
            box-shadow: 0 0 20px rgba(247, 147, 26, .35);
        }
        details summary::-webkit-details-marker {
            display: none;
        }
        .modal {
            display: none;
        }
        .modal.active {
            display: flex;
        }
    </style>
</head>
<body class="bg-neutral-950 text-neutral-100 font-sans">
    <div class="max-w-7xl mx-auto p-6 space-y-12">
        <!-- HERO -->
        <section class="relative rounded-2xl overflow-hidden bg-gradient-to-r from-black to-neutral-900 text-center py-20 px-6">
            <h1 class="text-4xl md:text-6xl font-extrabold tracking-tight mb-4">
                Explore <span class="accent">₿</span>TC vs MSTR Strategies
            </h1>
            <p class="text-lg text-neutral-300 max-w-2xl mx-auto">
                Access the Data, News, and Products Shaping <span class="accent">₿</span>itcoin Treasury Companies
            </p>
        </section>

        <!-- RECENT NEWS -->
        <section class="space-y-4">
            <h2 class="text-xl md:text-2xl font-semibold text-center">Recent News</h2>
            <div class="grid gap-4 md:grid-cols-3 text-center">
                <article class="bg-neutral-900/60 border border-neutral-800 rounded-2xl p-6 hover-zoom cursor-pointer" data-news="0">
                    <h3 class="font-semibold">Bitcoin treasury trend highlights</h3>
                    <p class="text-sm text-neutral-400 mt-1">How corporate balance sheets are evolving with BTC exposure.</p>
                    <span class="text-xs text-neutral-500 mt-2 inline-block">2 min read</span>
                </article>
                <article class="bg-neutral-900/60 border border-neutral-800 rounded-2xl p-6 hover-zoom cursor-pointer" data-news="1">
                    <h3 class="font-semibold">MSTR product updates and filings</h3>
                    <p class="text-sm text-neutral-400 mt-1">A quick look at recent disclosures and structure changes.</p>
                    <span class="text-xs text-neutral-500 mt-2 inline-block">3 min read</span>
                </article>
                <article class="bg-neutral-900/60 border border-neutral-800 rounded-2xl p-6 hover-zoom cursor-pointer" data-news="2">
                    <h3 class="font-semibold">Institutional adoption signals</h3>
                    <p class="text-sm text-neutral-400 mt-1">Headlines pointing to growing BTC participation by institutions.</p>
                    <span class="text-xs text-neutral-500 mt-2 inline-block">4 min read</span>
                </article>
            </div>
        </section>

        <!-- News Modal -->
        <div id="newsModal" class="modal fixed inset-0 bg-black/70 items-center justify-center p-4 z-50">
            <div class="bg-neutral-900 border border-neutral-800 rounded-2xl max-w-2xl w-full shadow-xl">
                <div class="flex items-center justify-between px-4 py-3 border-b border-neutral-800">
                    <h3 id="newsTitle" class="font-semibold">Title</h3>
                    <button id="newsClose" class="text-neutral-400 hover:text-white">✕</button>
                </div>
                <div id="newsBody" class="p-4 space-y-3 text-sm text-neutral-200"></div>
            </div>
        </div>

        <!-- PREFERRED INSTRUMENTS BY STRATEGY -->
        <section class="space-y-6">
            <h2 class="text-2xl font-semibold text-center accent">PREFERRED INSTRUMENTS BY STRATEGY</h2>
            <div class="divide-y divide-neutral-800 border border-neutral-800 rounded-2xl overflow-hidden">
                <!-- STRF -->
                <details class="group bg-neutral-900/50 open:bg-neutral-900">
                    <summary class="list-none cursor-pointer p-5 flex items-center justify-between">
                        <h3 class="font-semibold">
                            <span class="accent">⚖️ Strife (STRF)</span>
                            <span class="text-white"> = Safer → Steady, predictable, best for cautious investors. 🛡️</span>
                        </h3>
                        <span class="text-neutral-500 group-open:rotate-180 transition">▾</span>
                    </summary>
                    <div class="pl-10 pr-6 pb-5 space-y-3 text-sm">
                        <p class="text-white">“Think of it like a super reliable allowance you always get at the same time every quarter, no matter what.”</p>
                        <p class="text-white"><strong>Best for:</strong> Conservative investors who want steady, predictable income and low volatility.</p>
                        <div>
                            <p class="font-semibold mb-1">What you get:</p>
                            <ul class="list-none space-y-1 text-white">
                                <li>📈 Annual 10% fixed dividend</li>
                                <li>✅ Cumulative (missed dividends accrue and must be paid)</li>
                                <li>⭐ 8.2x BTC Rating</li>
                            </ul>
                        </div>
                        <div>
                            <p class="font-semibold mb-1">Risks:</p>
                            <ul class="list-none space-y-1 text-white">
                                <li>📉 Lower upside versus equity/convertibles</li>
                                <li>🧮 Sensitive to interest rates over time</li>
                            </ul>
                        </div>
                    </div>
                </details>
                <!-- STRC -->
                <details class="group bg-neutral-900/50 open:bg-neutral-900">
                    <summary class="list-none cursor-pointer p-5 flex items-center justify-between">
                        <h3 class="font-semibold">
                            <span class="accent">🤸 Stretch (STRC)</span>
                            <span class="text-white"> = Middle → Balance of income + flexibility/opportunity. 📊</span>
                        </h3>
                        <span class="text-neutral-500 group-open:rotate-180 transition">▾</span>
                    </summary>
                    <div class="pl-10 pr-6 pb-5 space-y-3 text-sm">
                        <p class="text-white">“It's like getting paid for babysitting, but the pay changes depending on how many hours the parents stay out.”</p>
                        <p class="text-white"><strong>Best for:</strong> Balanced investors okay with some fluctuation for potentially higher returns.</p>
                        <div>
                            <p class="font-semibold mb-1">What you get:</p>
                            <ul class="list-none space-y-1 text-white">
                                <li>📈 Annual variable ~9–10% with monthly payout</li>
                                <li>🔄 Adjustable by the company to stabilize price near $100</li>
                                <li>✅ Cumulative + dividend stopper</li>
                                <li>⭐ 6.3x BTC Rating</li>
                            </ul>
                        </div>
                        <div>
                            <p class="font-semibold mb-1">Risks:</p>
                            <ul class="list-none space-y-1 text-white">
                                <li>📉 Income can vary over time</li>
                                <li>🧱 Board discretion on adjustments</li>
                            </ul>
                        </div>
                    </div>
                </details>
                <!-- STRK -->
                <details class="group bg-neutral-900/50 open:bg-neutral-900">
                    <summary class="list-none cursor-pointer p-5 flex items-center justify-between">
                        <h3 class="font-semibold">
                            <span class="accent">⚡ Strike (STRK)</span>
                            <span class="text-white"> = Middle → Income + potential equity upside. 🎟️</span>
                        </h3>
                        <span class="text-neutral-500 group-open:rotate-180 transition">▾</span>
                    </summary>
                    <div class="pl-10 pr-6 pb-5 space-y-3 text-sm">
                        <p class="text-white">“It's like getting a slightly smaller allowance, but with lottery tickets included, and if the tickets win you make a lot more.”</p>
                        <p class="text-white"><strong>Best for:</strong> Growth-minded investors willing to accept lower income now for upside later.</p>
                        <div>
                            <p class="font-semibold mb-1">What you get:</p>
                            <ul class="list-none space-y-1 text-white">
                                <li>📈 Annual 8% dividend</li>
                                <li>🔁 Option to convert to MSTR common at ~$119</li>
                                <li>⭐ 5.7x BTC Rating</li>
                            </ul>
                        </div>
                        <div>
                            <p class="font-semibold mb-1">Risks:</p>
                            <ul class="list-none space-y-1 text-white">
                                <li>❌ Non-cumulative (missed dividends don’t carry over)</li>
                                <li>⏳ Callable after 5 years</li>
                            </ul>
                        </div>
                    </div>
                </details>
                <!-- STRD -->
                <details class="group bg-neutral-900/50 open:bg-neutral-900">
                    <summary class="list-none cursor-pointer p-5 flex items-center justify-between">
                        <h3 class="font-semibold">
                            <span class="accent">👉 Stride (STRD)</span>
                            <span class="text-white"> = Risker → Same dividend %, but could miss, for aggressive yield seekers. 📈</span>
                        </h3>
                        <span class="text-neutral-500 group-open:rotate-180 transition">▾</span>
                    </summary>
                    <div class="pl-10 pr-6 pb-5 space-y-3 text-sm">
                        <p class="text-white">“This one is like being promised dessert only if everyone else at the table is full. Sometimes you get it, sometimes you don’t.”</p>
                        <p class="text-white"><strong>Best for:</strong> Aggressive investors chasing high yield who accept higher risk of not being paid.</p>
                        <div>
                            <p class="font-semibold mb-1">What you get:</p>
                            <ul class="list-none space-y-1 text-white">
                                <li>📈 Annual 10% fixed dividend</li>
                                <li>❌ Non-cumulative (missed dividends don’t carry over)</li>
                                <li>⭐ 5.2x BTC Rating</li>
                            </ul>
                        </div>
                        <div>
                            <p class="font-semibold mb-1">Risks:</p>
                            <ul class="list-none space-y-1 text-white">
                                <li>👇 Junior to STRF in payout priority</li>
                                <li>💸 Trades at a discount & missed dividends vanish</li>
                            </ul>
                        </div>
                    </div>
                </details>
            </div>
        </section>

        <!-- QUIZ CTA -->
        <section class="flex items-center justify-center">
            <button id="quizBtn" class="px-5 py-3 rounded-xl accent-bg text-black font-semibold hover:opacity-90 transition accent-ring">
                Investor Fit Quiz
            </button>
        </section>

        <!-- CALCULATOR + EMBED (side-by-side) -->
        <section class="grid gap-6 md:grid-cols-2">
            <!-- Allocation Tool -->
            <div class="bg-neutral-900/60 border border-neutral-800 rounded-2xl p-4 md:p-5 shadow-lg">
                <h3 class="text-lg font-semibold mb-2">BTC vs MSTR Allocation Tool</h3>
                <div class="grid gap-4">
                    <div>
                        <label class="block text-sm text-neutral-400 mb-1">Date Range</label>
                        <input id="yearRange" type="range" min="2021" max="2025" step="1" value="2024" class="w-full">
                        <div class="text-sm mt-1">
                            <span class="text-neutral-400">Selected:</span>
                            <span id="yearRangeOut" class="font-semibold">2024</span>
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm text-neutral-400 mb-1">Allocation Split (%)</label>
                        <input id="splitRange" type="range" min="0" max="100" step="10" value="50" class="w-full">
                        <div class="text-sm mt-1">
                            <span class="text-neutral-400">MSTR:</span>
                            <span id="splitOut" class="font-semibold">50%</span>
                            <span class="mx-2">•</span>
                            <span class="text-neutral-400">BTC:</span>
                            <span id="btcOut" class="font-semibold">50%</span>
                        </div>
                    </div>
                </div>
                <div class="mt-4 overflow-x-auto">
                    <table class="w-full text-sm border-t border-neutral-800">
                        <thead>
                            <tr class="text-left">
                                <th class="p-2">Metric</th>
                                <th class="p-2">BTC</th>
                                <th class="p-2">MSTR</th>
                            </tr>
                        </thead>
                        <tbody id="resultsRows"></tbody>
                    </table>
                </div>
                <p class="text-xs text-neutral-500 mt-3">Illustrative only — not financial advice.</p>
            </div>

            <!-- Chart -->
            <div class="bg-neutral-900/60 border border-neutral-800 rounded-2xl p-4 md:p-5 shadow-lg">
                <h2 class="text-xl md:text-2xl font-semibold text-center mb-2">BTC vs MSTR</h2>
                <div class="rounded-xl overflow-hidden border border-neutral-800">
                    <iframe src="https://bitcointreasuries.net/embed?component=StockVsBitcoinChart&entityId=1" title="Bitcoin Treasuries" style="width: 100%; height: 640px; border: none;"></iframe>
                </div>
            </div>
        </section>

        <!-- FAQ (centered) -->
        <section class="space-y-3 mt-6 text-center">
            <h2 class="text-xl md:text-2xl font-semibold accent">FAQ</h2>
            <div class="divide-y divide-neutral-800 border border-neutral-800 rounded-2xl overflow-hidden max-w-3xl mx-auto text-left">
                <details class="group bg-neutral-900/50 open:bg-neutral-900">
                    <summary class="list-none cursor-pointer p-4 flex items-center justify-between">
                        <span class="font-semibold">When are the next earnings for MSTR?</span>
                        <span class="text-neutral-500 group-open:rotate-180 transition">▾</span>
                    </summary>
                    <div class="px-4 pb-4 text-sm text-neutral-300">MSTR typically reports quarterly earnings; check investor relations for the specific date.</div>
                </details>
                <details class="group bg-neutral-900/50 open:bg-neutral-900">
                    <summary class="list-none cursor-pointer p-4 flex items-center justify-between">
                        <span class="font-semibold">How much Bitcoin does Strategy hold?</span>
                        <span class="text-neutral-500 group-open:rotate-180 transition">▾</span>
                    </summary>
                    <div class="px-4 pb-4 text-sm text-neutral-300">Strategy currently holds a significant amount of Bitcoin; figures update with quarterly filings.</div>
                </details>
                <details class="group bg-neutral-900/50 open:bg-neutral-900">
                    <summary class="list-none cursor-pointer p-4 flex items-center justify-between">
                        <span class="font-semibold">MSTR who are they & on which index?</span>
                        <span class="text-neutral-500 group-open:rotate-180 transition">▾</span>
                    </summary>
                    <div class="px-4 pb-4 text-sm text-neutral-300">MicroStrategy is a U.S.-based software and business intelligence company traded on NASDAQ under the ticker MSTR.</div>
                </details>
                <details class="group bg-neutral-900/50 open:bg-neutral-900">
                    <summary class="list-none cursor-pointer p-4 flex items-center justify-between">
                        <span class="font-semibold">What is a Bitcoin Treasury company?</span>
                        <span class="text-neutral-500 group-open:rotate-180 transition">▾</span>
                    </summary>
                    <div class="px-4 pb-4 text-sm text-neutral-300">A company that holds a meaningful amount of Bitcoin on its balance sheet as part of its treasury strategy and discloses holdings in filings.</div>
                </details>
                <details class="group bg-neutral-900/50 open:bg-neutral-900">
                    <summary class="list-none cursor-pointer p-4 flex items-center justify-between">
                        <span class="font-semibold">Who is Michael Saylor?</span>
                        <span class="text-neutral-500 group-open:rotate-180 transition">▾</span>
                    </summary>
                    <div class="px-4 pb-4 text-sm text-neutral-300">Michael Saylor is the Executive Chairman of MicroStrategy and a prominent advocate of Bitcoin as a corporate treasury asset.</div>
                </details>
            </div>
        </section>
    </div>

    <!-- QUIZ MODAL (moved inside <body>) -->
    <div id="quizModal" class="modal fixed inset-0 bg-black/70 items-center justify-center p-4 z-50">
        <div class="bg-neutral-900 border border-neutral-800 rounded-2xl max-w-xl w-full shadow-xl">
            <div class="flex items-center justify-between px-4 py-3 border-b border-neutral-800">
                <h3 class="font-semibold">Investor Fit Quiz</h3>
                <button id="quizClose" class="text-neutral-400 hover:text-white">✕</button>
            </div>
            <div class="p-4 space-y-4" id="quizBody"></div>
            <div class="p-4 pt-0 flex items-center justify-between">
                <button id="quizPrev" class="px-3 py-2 rounded-lg border border-neutral-700">Back</button>
                <button id="quizNext" class="px-3 py-2 rounded-lg accent-bg text-black font-semibold">Next</button>
            </div>
        </div>
    </div>

    <!-- SCRIPTS (moved inside <body> so elements exist when queried) -->
    <script>
        // --- Slider labels sync
        const yearRange = document.getElementById('yearRange');
        const yearOut = document.getElementById('yearRangeOut');
        const splitRange = document.getElementById('splitRange');
        const splitOut = document.getElementById('splitOut');
        const btcOut = document.getElementById('btcOut');

        function sync() {
            if (yearOut && yearRange) yearOut.textContent = yearRange.value;
            if (splitOut && btcOut && splitRange) {
                splitOut.textContent = splitRange.value + '%';
                btcOut.textContent = (100 - Number(splitRange.value)) + '%';
            }
        }

        if (yearRange) yearRange.addEventListener('input', sync);
        if (splitRange) splitRange.addEventListener('input', sync);
        sync();

        // --- Results table logic (BTC via CoinGecko; MSTR via static map)
        (function() {
            const rowsEl = document.getElementById('resultsRows');
            if (!rowsEl) return;

            function toYMD(d) {
                const dt = new Date(d);
                dt.setHours(0, 0, 0, 0);
                return dt.toISOString().slice(0, 10);
            }

            function addDays(ds, n) {
                const d = new Date(ds + 'T00:00:00');
                d.setDate(d.getDate() + n);
                return toYMD(d);
            }

            function startTs(ds) {
                return Math.floor(new Date(ds + 'T00:00:00').getTime() / 1000);
            }

            function fmtUSD(x) {
                return (x == null || Number.isNaN(x)) ? '—' : x.toLocaleString(undefined, { style: 'currency', currency: 'USD', maximumFractionDigits: 2 });
            }

            function fmtPct(x) {
                return (x == null || Number.isNaN(x)) ? '—' : (x * 100).toFixed(2) + '%';
            }

            function getPriceOnOrBefore(ds, map) {
                if (!map) return null;
                if (map[ds] != null) return map[ds];
                for (let i = 1; i <= 7; i++) {
                    const p = addDays(ds, -i);
                    if (map[p] != null) return map[p];
                }
                const ks = Object.keys(map).sort();
                return ks.length ? map[ks[0]] : null;
            }

            function computeLump(amount, startDate, endDate, priceMap) {
                const p0 = getPriceOnOrBefore(startDate, priceMap),
                    p1 = getPriceOnOrBefore(endDate, priceMap);
                if (!p0 || !p1) return null;
                const units = amount / p0,
                    endVal = units * p1,
                    ret = (endVal - amount) / amount;
                const yrs = (new Date(endDate) - new Date(startDate)) / (365.25 * 24 * 3600 * 1000);
                const cagr = yrs > 0 ? Math.pow(endVal / amount, 1 / yrs) - 1 : 0;
                return { units, endVal, totalRet: ret, cagr, invested: amount };
            }

            async function fetchBTC(fromDate, toDate) {
                const url = 'https://api.coingecko.com/api/v3/coins/bitcoin/market_chart/range?vs_currency=usd&from=' + startTs(fromDate) + '&to=' + (startTs(toDate) + 86399);
                try {
                    const res = await fetch(url, { headers: { 'accept': 'application/json' } });
                    if (!res.ok) throw new Error('BTC fetch failed');
                    const j = await res.json();
                    const map = {};
                    (j.prices || []).forEach(pair => {
                        const ds = toYMD(pair[0]);
                        map[ds] = pair[1];
                    });
                    return map;
                } catch (e) {
                    // Fallback synthetic series so the table still populates in preview envs
                    const map = {};
                    let d = new Date(fromDate + 'T00:00:00');
                    const end = new Date(toDate + 'T00:00:00');
                    let px = 10000;
                    while (d <= end) {
                        map[toYMD(d)] = px;
                        px *= 1 + (Math.sin(d.getTime() / 8.64e7) * 0.005);
                        d.setDate(d.getDate() + 1);
                    }
                    return map;
                }
            }

            // Placeholder MSTR daily map; replace with real API data when available
            const mstrMap = {
                "2020-01-02": 140.12,
                "2020-06-01": 144.04,
                "2021-01-04": 531.64,
                "2021-02-09": 1272.00,
                "2022-11-21": 160.00,
                "2023-01-03": 141.57,
                "2023-12-29": 689.00,
                "2024-03-27": 1999.99,
                "2025-01-02": 1270.00
            };

            async function renderResults() {
                const startYear = Number(document.getElementById('yearRange')?.value || '2024');
                const startDate = startYear + '-01-01';
                const endDate = toYMD(new Date());
                const amount = 10000; // illustrative constant budget
                const btcMap = await fetchBTC(startDate, endDate);
                const btc = computeLump(amount, startDate, endDate, btcMap);
                const mstr = computeLump(amount, startDate, endDate, mstrMap);
                const make = (label, b, m, fmt) => `<tr><td class="p-2 text-neutral-400">${label}</td><td class="p-2">${fmt(b)}</td><td class="p-2">${fmt(m)}</td></tr>`;
                rowsEl.innerHTML = [
                    make('Invested', btc?.invested, mstr?.invested, fmtUSD),
                    make('Units / Shares', btc?.units, mstr?.units, x => x == null ? '—' : (x.toFixed ? x.toFixed(6) : '—')),
                    make('End Value', btc?.endVal, mstr?.endVal, fmtUSD),
                    make('Total Return', btc?.totalRet, mstr?.totalRet, fmtPct),
                    make('CAGR', btc?.cagr, mstr?.cagr, fmtPct)
                ].join('');
            }

            renderResults();
            if (yearRange) yearRange.addEventListener('input', renderResults);
        })();
    </script>

    <script>
        // --- News cards -> modal
        (function() {
            const DATA = [
                {
                    t: 'Bitcoin treasury trend highlights',
                    b: '<p>Overview of how companies with significant BTC holdings think about volatility, treasury diversification, and disclosures. Placeholder text; replace with live content later.</p>'
                },
                {
                    t: 'MSTR product updates and filings',
                    b: '<p>Compact summary of preferred instruments and filings. Placeholder for curated links/summaries.</p>'
                },
                {
                    t: 'Institutional adoption signals',
                    b: '<p>Round-up of headlines indicating growing institutional participation in BTC markets. Placeholder.</p>'
                }
            ];
            const modal = document.getElementById('newsModal');
            const title = document.getElementById('newsTitle');
            const body = document.getElementById('newsBody');
            const close = document.getElementById('newsClose');

            document.querySelectorAll('[data-news]').forEach(el => {
                el.addEventListener('click', () => {
                    const i = Number(el.getAttribute('data-news')) || 0;
                    title.textContent = DATA[i].t;
                    body.innerHTML = DATA[i].b;
                    modal.classList.add('active');
                });
            });

            if (close) {
                close.addEventListener('click', () => modal.classList.remove('active'));
            }
            // optional: click backdrop to close
            modal.addEventListener('click', (e) => {
                if (e.target === modal) modal.classList.remove('active');
            });
        })();

        // --- Quiz (4-question flow)
        (function() {
            const modal = document.getElementById('quizModal');
            const body = document.getElementById('quizBody');
            const close = document.getElementById('quizClose');
            const prev = document.getElementById('quizPrev');
            const next = document.getElementById('quizNext');
            const btn = document.getElementById('quizBtn');

            const Q = [
                {
                    q: "What’s your top priority when earning income?",
                    a: [
                        { t: "Safest possible yield — protected.", map: "A" },
                        { t: "Flexibility / some upside.", map: "B" },
                        { t: "Income + equity upside.", map: "C" },
                        { t: "Highest yield even if riskier.", map: "D" },
                        { t: "Don’t need income — prefer volatility.", map: "E" }
                    ]
                },
                {
                    q: "How often do you want to see returns?",
                    a: [
                        { t: "Monthly payouts.", map: "B" },
                        { t: "Quarterly rhythm.", map: "A" },
                        { t: "Either; stability matters.", map: "A" },
                        { t: "Irregular is fine; long-term focus.", map: "C" }
                    ]
                },
                {
                    q: "How important is income protection?",
                    a: [
                        { t: "Very important (cumulative rights, stoppers).", map: "A" },
                        { t: "Some protection is good.", map: "B" },
                        { t: "Okay with higher risk for yield/upside.", map: "C" },
                        { t: "Yield/exposure matters more than protection.", map: "D" }
                    ]
                },
                {
                    q: "Claim seniority preference?",
                    a: [
                        { t: "Strongest claim among preferreds.", map: "A" },
                        { t: "Moderate — some security.", map: "B" },
                        { t: "Lower claim OK for upside.", map: "C" },
                        { t: "Not a priority.", map: "D" }
                    ]
                }
            ];

            const OUT = {
                A: { label: 'STRF (10% Cumulative)', why: 'Stability-first; highest claim; cumulative dividends.' },
                B: { label: 'STRC (Variable)', why: 'Monthly payouts; cumulative + stopper.' },
                C: { label: 'STRK (Convertible 8%)', why: 'Income + potential equity upside.' },
                D: { label: 'STRD (Non-cumulative 10%)', why: 'Higher yield with higher risk.' },
                E: { label: 'MSTR Common Stock', why: 'Pure equity; no income.' }
            };

            let step = 0, answers = [];

            function render() {
                body.innerHTML = '';
                if (step < Q.length) {
                    const q = Q[step];
                    const wrap = document.createElement('div');
                    wrap.className = 'space-y-3 text-center';
                    const h = document.createElement('h4');
                    h.className = 'font-semibold';
                    h.textContent = q.q;
                    wrap.appendChild(h);
                    q.a.forEach((opt, i) => {
                        const id = `ans-${step}-${i}`;
                        const label = document.createElement('label');
                        label.className = 'flex items-center justify-center p-4 rounded-xl border border-neutral-800 hover:border-orange-500/60 hover:bg-orange-500/5 cursor-pointer';
                        label.setAttribute('for', id);
                        label.innerHTML = `<input id="${id}" type="radio" name="q${step}" class="mr-3" value="${opt.map}">${opt.t}`;
                        wrap.appendChild(label);
                    });
                    body.appendChild(wrap);
                    prev.classList.toggle('opacity-50', step === 0);
                    next.textContent = step === Q.length - 1 ? 'Finish' : 'Next';
                } else {
                    const counts = {};
                    answers.forEach(a => counts[a] = (counts[a] || 0) + 1);
                    const top = Object.entries(counts).sort((a, b) => b[1] - a[1])[0][0];
                    const o = OUT[top];
                    body.innerHTML = `<div class="space-y-2 text-center"><h4 class="font-semibold">You’re a <span class="accent">${o.label}</span> investor.</h4><p class="text-sm text-white/90">${o.why}</p></div>`;
                    prev.classList.add('hidden');
                    next.textContent = 'Close';
                }
            }

            if (btn) {
                btn.addEventListener('click', () => {
                    step = 0;
                    answers = [];
                    prev.classList.remove('hidden');
                    modal.classList.add('active');
                    render();
                });
            }

            if (close) {
                close.addEventListener('click', () => modal.classList.remove('active'));
            }

            if (prev) {
                prev.addEventListener('click', () => {
                    if (step > 0) {
                        step--;
                        answers.pop();
                        render();
                    }
                });
            }

            if (next) {
                next.addEventListener('click', () => {
                    if (step < Q.length) {
                        const picked = document.querySelector(`input[name="q${step}"]:checked`);
                        if (!picked) {
                            return;
                        }
                        answers.push(picked.value);
                        step++;
                        render();
                    } else {
                        modal.classList.remove('active');
                    }
                });
            }
        })();
    </script>
</body>
</html>
